<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Bands In Town</title>
</head>

<body>

  <!-- Artist Select Box -->
  <form id="artist-form">

    <!-- Label for Text Box -->
    <label for="artist-input">Choose Your Plant</label>

    <!-- Text Input Box -->
    <input type="text" id="artist-input">
    <br>

    <!-- Submit Button -->
    <input id="select-artist" type="submit" placeholder="enter plant here"><button id="QR" type="submit">Generate QR code</button>
    
  </form>

  <!-- Artist Information -->
  <div id="artist-div">

  </div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
var plantArray = [];
  function searchBandsInTown(plantName) {
    console.log('this is running', plantName);
    // Querying the bandsintown api for the selected artist, the ?app_id parameter is required, but can equal anything
 var queryURL = `https://plantsdb.xyz/search?limit=100&Common_name=${plantName}`;
    $.ajax({
      url: queryURL,
      method: "GET"
    }).then(function (response) {
     
        for (i=0; i<response.data.length; i++) {
           var  Accepted_Symbol_x, Category,Class, Common_Name, Division, Drought_Tolerance, Duration, Family, Family_Common_Name, Family_Symbol, Fire_Resistance, Fire_Tolerance, Flower_Color, Fodder_Product, Frost_Free_Days_Minimum, Fruit_Color, Fruit_Conspicuous, Fruit_Seed_Abundance,Fruit_Seed_Period_Begin, Fruit_Seed_Period_End, Fruit_Seed_Persistence, Genus, Invasive, Kingdom, Lifespan, Moisture_Use, Nitrogen_Fixation, Scientific_Name_x, Scientific_Name_y, Seed_Spread_Rate, Seeds_per_Pound, Shade_Tolerance, Species, State_and_Province, SubClass,plantSymbol,Temperature_Minimum_F,id, xOrder, Subclass

           
        

           Accepted_Symbol_x = response.data[i].Accepted_Symbol_x
           Category = response.data[i].Category
           Class = response.data[i].Class
           Common_Name = response.data[i].Common_Name
           Division = response.data[i].Division
            Drought_Tolerance = response.data[i].Drought_Tolerance
           Duration = response.data[i].Duration
           Family = response.data[i].Family
            Family_Common_Name = response.data[i].Family_Common_Name
            Family_Symbol = response.data[i].Family_Symbol
            Fire_Resistance = response.data[i].Fire_Resistance
            Fire_Tolerance = response.data[i].Fire_Tolerance
            Flower_Color = response.data[i].Flower_Color
            Fodder_Product = response.data[i].odder_Product
            Frost_Free_Days_Minimum = response.data[i].Frost_Free_Days_Minimum
            Fruit_Color = response.data[i].Fruit_Color
            Fruit_Conspicuous = response.data[i].Fruit_Conspicuous
            Fruit_Seed_Abundance = response.data[i].Fruit_Seed_Abundance
            Fruit_Seed_Period_Begin = response.data[i].Fruit_Seed_Period_Begin
            Fruit_Seed_Period_End = response.data[i].Fruit_Seed_Period_End
            Fruit_Seed_Persistence = response.data[i].Fruit_Seed_Persistence
           Genus = response.data[i].Genus
           Invasive = response.data[i].Invasive
           Kingdom = response.data[i].Kingdom
           Lifespan = response.data[i].Lifespan
           Moisture_Use = response.data[i].Moisture_Use
            Nitrogen_Fixation = response.data[i].Nitrogen_Fixation
           Scientific_Name_x = response.data[i].Scientific_Name_x
            Scientific_Name_y = response.data[i].Scientific_Name_y
            Seed_Spread_Rate = response.data[i].Seed_Spread_Rate
            Seeds_per_Pound = response.data[i].Seeds_per_Pound
            Shade_Tolerance = response.data[i].Shade_Tolerance
           Species = response.data[i].Species
           State_and_Province = response.data[i].State_and_Province
           SubClass = response.data[i].SubClass
           plantSymbol = response.data[i].lantSymbol
           Temperature_Minimum_F = response.data[i].Temperature_Minimum_F
           id = response.data[i].id
           xOrder = response.data[i].xOrder
        //    console.log(Genus+" " + Invasive +" "+  Kingdom + " " +Lifespan + "  " +Moisture_Use + " " + Scientific_Name_x + " "+ Species + " " + State_and_Province +" "+ Subclass + " "+ plantSymbol + " " +Accepted_Symbol_x + " " + Class + " " + Common_Name + " " +Category + ""+ Class + "" + Division+ ""+Family );
        //    console.log (id + " " + Class);
        //    console.log(Accepted_Symbol_x+"  "+ Category+"  "+Class + "" + Division+ ""+Family);
          plantArray.push(Genus," " , Invasive ," ",  Kingdom , " " ,Lifespan , "  " ,Moisture_Use , " " , Scientific_Name_x , " ", Species , " " , State_and_Province ," ", Subclass , " ", plantSymbol , " " ,Accepted_Symbol_x , " " , Class , " " , Common_Name , " " ,Category , "", Class , "" , Division, "",Family,id , " " , Class,id , " " , Class );
          console.log("qr info  " + plantArray);
        $("#artist-div").append(response);
      
        };
      
      
    //   Constructing HTML containing the artist information
    
      // var artistURL = $("<a>").attr("href"=$
         
      // var artistImage = $("<imgkion>").attr("src"+""+ response.thumb_url);
      // var trackerCount = $("<h2>").text(response.tracker_count + "  " + " fans tracking this artist");
      // var upcomingEvents = $("<h2>").text(response.upcoming_event_count + " upcoming events");
      // var goToArtist = $("<a>").attr("href", response.url).text("See Tour Dates");

      // // Empty the contents of the artist-div, append the new artist content
      // $("#artist-div").empty();
      // $("#artist-div").append(artistURL, artistImage, trackerCount, upcomingEvents, goToArtist);
    });
  }

  function createQr(plantArray){
    var queryURL= "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+plantArray+"";
      $.ajax({
   
      url: queryURL,
      method: "GET"
    }).then(function (response) {
        console.log(response);

  });
  }

  // Event handler for user clicking the select-artist button
  $("#select-artist").on("click", function (event) {
    // Preventing the button from trying to submit the form
    event.preventDefault();
    // Storing the artist name
    plantArray.length=0;
    var plant = $("#artist-input").val().trim(); 

    // Running the searchBandsInTown function (passing in the artist as an argument)
    searchBandsInTown(plant);
    createQr(plantArray);
  });
  $("#QR").on("click", function(event){
      event.preventDefault();
      createQr(plantArray);

  });

</script>

</html>